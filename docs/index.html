<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6502 Emulator Dashboard</title>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <header class="topbar">
      <div>
        <h1>6502 Emulator</h1>
        <p class="sub">JS/CSS/HTML GUI for rustiNESs 6502 emulator written in Rust based on javidx9's wonderful video</p>
      </div>

      <div class="status">
        <span class="dot" id="statusDot"></span>
        <span id="statusText">Loading WASMâ€¦</span>
      </div>
    </header>

    <main class="grid">
      <!-- Assembler -->
      <section class="card">
        <h2>Program code</h2>
        <textarea id="asmInput" spellcheck="false">
; demo program (placeholder)


        </textarea>

        <div class="row">
          <button id="btnAssemble" class="primary">Assemble + Load</button>
          <button id="btnReset">Reset</button>
        </div>

        <p class="hint">
          This is a proof of concept: assembler + memory loading can be wired later.
        </p>
      </section>

      <!-- Controls -->
      <section class="card">
        <h2>Controls</h2>

        <div class="controls">
          <button id="btnStep">Step Instruction</button>
          <button id="btnClock">Clock (1 cycle)</button>
          <button id="btnRun" class="primary">Run</button>
          <button id="btnPause">Pause</button>
        </div>

        <div class="row">
          <label class="label">
            Cycles / frame
            <input id="cyclesPerFrame" type="number" min="1" value="5000" />
          </label>
        </div>

        <div class="log" id="log"></div>
      </section>

      <!-- Registers -->
      <section class="card">
        <h2>CPU status</h2>

        <div class="kv">
            <div class="k">A</div><div class="v" id="a">--</div>
            <div class="k">X</div><div class="v" id="x">--</div>
            <div class="k">Y</div><div class="v" id="y">--</div>
            <div class="k">PC</div><div class="v" id="pc">----</div>
            <div class="k">SP</div><div class="v" id="sp">--</div>
            <div class="k">STATUS</div><div class="v" id="status">--------</div>

            <hr style="grid-column: 1 / -1; opacity: 0.2; margin: 10px 0;">

            <div class="k">FETCHED</div><div class="v" id="fetched">--</div>
            <div class="k">ADDR_ABS</div><div class="v" id="addr_abs">----</div>
            <div class="k">ADDR_REL</div><div class="v" id="addr_rel">----</div>
            <div class="k">OPCODE</div><div class="v" id="opcode">--</div>
            <div class="k">CYCLES</div><div class="v" id="cycles">----</div>

        </div>
      </section>

      <!-- RAM -->
      <section class="card wide">
        <h2>RAM</h2>
        <div class="ram" id="ramGrid"></div>
      </section>
    </main>

    <script type="module" src="./main.js"></script>
  </body>
</html>
